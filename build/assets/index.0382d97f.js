(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function d(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(s){if(s.ep)return;s.ep=!0;const n=d(s);fetch(s.href,n)}})();var Ye={grad:.9,turn:360,rad:360/(2*Math.PI)},P=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},L=function(e,t,d){return t===void 0&&(t=0),d===void 0&&(d=Math.pow(10,t)),Math.round(d*e)/d+0},R=function(e,t,d){return t===void 0&&(t=0),d===void 0&&(d=1),e>d?d:e>t?e:t},qe=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},ve=function(e){return{r:R(e.r,0,255),g:R(e.g,0,255),b:R(e.b,0,255),a:R(e.a)}},oe=function(e){return{r:L(e.r),g:L(e.g),b:L(e.b),a:L(e.a,3)}},et=/^#([0-9a-f]{3,8})$/i,Y=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Je=function(e){var t=e.r,d=e.g,u=e.b,s=e.a,n=Math.max(t,d,u),f=n-Math.min(t,d,u),h=f?n===t?(d-u)/f:n===d?2+(u-t)/f:4+(t-d)/f:0;return{h:60*(h<0?h+6:h),s:n?f/n*100:0,v:n/255*100,a:s}},Be=function(e){var t=e.h,d=e.s,u=e.v,s=e.a;t=t/360*6,d/=100,u/=100;var n=Math.floor(t),f=u*(1-d),h=u*(1-(t-n)*d),g=u*(1-(1-t+n)*d),$=n%6;return{r:255*[u,h,f,f,g,u][$],g:255*[g,u,u,h,f,f][$],b:255*[f,f,g,u,u,h][$],a:s}},we=function(e){return{h:qe(e.h),s:R(e.s,0,100),l:R(e.l,0,100),a:R(e.a)}},ye=function(e){return{h:L(e.h),s:L(e.s),l:L(e.l),a:L(e.a,3)}},Ce=function(e){return Be((d=(t=e).s,{h:t.h,s:(d*=((u=t.l)<50?u:100-u)/100)>0?2*d/(u+d)*100:0,v:u+d,a:t.a}));var t,d,u},V=function(e){return{h:(t=Je(e)).h,s:(s=(200-(d=t.s))*(u=t.v)/100)>0&&s<200?d*u/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,d,u,s},tt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ut=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,st=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,me={string:[[function(e){var t=et.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?L(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?L(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ut.exec(e)||st.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:ve({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=tt.exec(e)||dt.exec(e);if(!t)return null;var d,u,s=we({h:(d=t[1],u=t[2],u===void 0&&(u="deg"),Number(d)*(Ye[u]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ce(s)},"hsl"]],object:[[function(e){var t=e.r,d=e.g,u=e.b,s=e.a,n=s===void 0?1:s;return P(t)&&P(d)&&P(u)?ve({r:Number(t),g:Number(d),b:Number(u),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,d=e.s,u=e.l,s=e.a,n=s===void 0?1:s;if(!P(t)||!P(d)||!P(u))return null;var f=we({h:Number(t),s:Number(d),l:Number(u),a:Number(n)});return Ce(f)},"hsl"],[function(e){var t=e.h,d=e.s,u=e.v,s=e.a,n=s===void 0?1:s;if(!P(t)||!P(d)||!P(u))return null;var f=function(h){return{h:qe(h.h),s:R(h.s,0,100),v:R(h.v,0,100),a:R(h.a)}}({h:Number(t),s:Number(d),v:Number(u),a:Number(n)});return Be(f)},"hsv"]]},ke=function(e,t){for(var d=0;d<t.length;d++){var u=t[d][0](e);if(u)return[u,t[d][1]]}return[null,void 0]},nt=function(e){return typeof e=="string"?ke(e.trim(),me.string):typeof e=="object"&&e!==null?ke(e,me.object):[null,void 0]},re=function(e,t){var d=V(e);return{h:d.h,s:R(d.s+100*t,0,100),l:d.l,a:d.a}},ce=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Ee=function(e,t){var d=V(e);return{h:d.h,s:d.s,l:R(d.l+100*t,0,100),a:d.a}},pe=function(){function e(t){this.parsed=nt(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return L(ce(this.rgba),2)},e.prototype.isDark=function(){return ce(this.rgba)<.5},e.prototype.isLight=function(){return ce(this.rgba)>=.5},e.prototype.toHex=function(){return t=oe(this.rgba),d=t.r,u=t.g,s=t.b,f=(n=t.a)<1?Y(L(255*n)):"","#"+Y(d)+Y(u)+Y(s)+f;var t,d,u,s,n,f},e.prototype.toRgb=function(){return oe(this.rgba)},e.prototype.toRgbString=function(){return t=oe(this.rgba),d=t.r,u=t.g,s=t.b,(n=t.a)<1?"rgba("+d+", "+u+", "+s+", "+n+")":"rgb("+d+", "+u+", "+s+")";var t,d,u,s,n},e.prototype.toHsl=function(){return ye(V(this.rgba))},e.prototype.toHslString=function(){return t=ye(V(this.rgba)),d=t.h,u=t.s,s=t.l,(n=t.a)<1?"hsla("+d+", "+u+"%, "+s+"%, "+n+")":"hsl("+d+", "+u+"%, "+s+"%)";var t,d,u,s,n},e.prototype.toHsv=function(){return t=Je(this.rgba),{h:L(t.h),s:L(t.s),v:L(t.v),a:L(t.a,3)};var t},e.prototype.invert=function(){return O({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),O(re(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),O(re(this.rgba,-t))},e.prototype.grayscale=function(){return O(re(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),O(Ee(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),O(Ee(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?O({r:(d=this.rgba).r,g:d.g,b:d.b,a:t}):L(this.rgba.a,3);var d},e.prototype.hue=function(t){var d=V(this.rgba);return typeof t=="number"?O({h:t,s:d.s,l:d.l,a:d.a}):L(d.h)},e.prototype.isEqual=function(t){return this.toHex()===O(t).toHex()},e}(),O=function(e){return e instanceof pe?e:new pe(e)},$e=[],it=function(e){e.forEach(function(t){$e.indexOf(t)<0&&(t(pe,me),$e.push(t))})},fe=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},ae=function(e){return .2126*fe(e.r)+.7152*fe(e.g)+.0722*fe(e.b)};function ot(e){e.prototype.luminance=function(){return t=ae(this.rgba),(d=2)===void 0&&(d=0),u===void 0&&(u=Math.pow(10,d)),Math.round(u*t)/u+0;var t,d,u},e.prototype.contrast=function(t){t===void 0&&(t="#FFF");var d,u,s,n,f,h,g,$=t instanceof e?t:new e(t);return n=this.rgba,f=$.toRgb(),h=ae(n),g=ae(f),d=h>g?(h+.05)/(g+.05):(g+.05)/(h+.05),(u=2)===void 0&&(u=0),s===void 0&&(s=Math.pow(10,u)),Math.floor(s*d)/s+0},e.prototype.isReadable=function(t,d){return t===void 0&&(t="#FFF"),d===void 0&&(d={}),this.contrast(t)>=(h=(f=(u=d).size)===void 0?"normal":f,(n=(s=u.level)===void 0?"AA":s)==="AAA"&&h==="normal"?7:n==="AA"&&h==="large"?3:4.5);var u,s,n,f,h}}var xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(e){var t=e.default;if(typeof t=="function"){var d=function(){return t.apply(this,arguments)};d.prototype=t.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(e).forEach(function(u){var s=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(d,u,s.get?s:{enumerable:!0,get:function(){return e[u]}})}),d}var We={exports:{}};const ct={},ft=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),be=rt(ft);var q={exports:{}};const at=/^\u0001ACTION ([^\u0001]+)\u0001$/,lt=/^(justinfan)(\d+$)/,ht=/\\([sn:r\\])/g,mt=/([ \n;\r\\])/g,Te={s:" ",n:"",":":";",r:""},Ne={" ":"s","\n":"n",";":":","\r":"r"},pt=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),bt=/[|\\^$*+?:#]/,ee=q.exports={get:(e,t)=>typeof e>"u"?t:e,hasOwn:(e,t)=>({}).hasOwnProperty.call(e,t),promiseDelay:e=>new Promise(t=>setTimeout(t,e)),isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),toNumber(e,t){if(e===null)return 0;const d=Math.pow(10,ee.isFinite(t)?t:0);return Math.round(e*d)/d},isInteger:e=>!isNaN(ee.toNumber(e,0)),isRegex:e=>bt.test(e),isURL:e=>pt.test(e),justinfan:()=>`justinfan${Math.floor(Math.random()*8e4+1e3)}`,isJustinfan:e=>lt.test(e),channel(e){const t=(e||"").toLowerCase();return t[0]==="#"?t:"#"+t},username(e){const t=(e||"").toLowerCase();return t[0]==="#"?t.slice(1):t},token:e=>e?e.toLowerCase().replace("oauth:",""):"",password(e){const t=ee.token(e);return t?`oauth:${t}`:""},actionMessage:e=>e.match(at),replaceAll(e,t){if(e===null||typeof e>"u")return null;for(const d in t)e=e.replace(new RegExp(d,"g"),t[d]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(e){return!e||typeof e!="string"||!e.includes("\\")?e:e.replace(ht,(t,d)=>d in Te?Te[d]:d)},escapeIRC(e){return!e||typeof e!="string"?e:e.replace(mt,(t,d)=>d in Ne?`\\${Ne[d]}`:d)},addWord:(e,t)=>e.length?e+" "+t:e+t,splitLine(e,t){let d=e.substring(0,t).lastIndexOf(" ");return d===-1&&(d=t-1),[e.substring(0,d),e.substring(d+1)]},extractNumber(e){const t=e.split(" ");for(let d=0;d<t.length;d++)if(ee.isInteger(t[d]))return~~t[d];return 0},formatDate(e){let t=e.getHours(),d=e.getMinutes();return t=(t<10?"0":"")+t,d=(d<10?"0":"")+d,`${t}:${d}`},inherits(e,t){e.super_=t;const d=function(){};d.prototype=t.prototype,e.prototype=new d,e.prototype.constructor=e},isNode(){try{return typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"}catch{}return!1}},gt=be,Le=q.exports;var _t=function(t,d){let u=t.url!==void 0?t.url:t.uri;if(Le.isURL(u)||(u=`https://api.twitch.tv/kraken${u[0]==="/"?u:`/${u}`}`),Le.isNode()){const s=Object.assign({method:"GET",json:!0},t);s.qs&&(u+=`?${new URLSearchParams(s.qs)}`);const n={};"fetchAgent"in this.opts.connection&&(n.agent=this.opts.connection.fetchAgent);const f=gt(u,{...n,method:s.method,headers:s.headers,body:s.body});let h={};f.then(g=>(h={statusCode:g.status,headers:g.headers},s.json?g.json():g.text())).then(g=>d(null,h,g),g=>d(g,h,null))}else{const s=Object.assign({method:"GET",headers:{}},t,{url:u}),n=new XMLHttpRequest;n.open(s.method,s.url,!0);for(const f in s.headers)n.setRequestHeader(f,s.headers[f]);n.responseType="json",n.addEventListener("load",f=>{n.readyState===4&&(n.status!==200?d(n.status,null,null):d(null,null,n.response))}),n.send()}};const v=q.exports;function Ie(e,t){return e=v.channel(e),t=v.get(t,30),this._sendCommand(null,e,`/followers ${t}`,(d,u)=>{this.once("_promiseFollowers",s=>{s?u(s):d([e,~~t])})})}function Se(e){return e=v.channel(e),this._sendCommand(null,e,"/followersoff",(t,d)=>{this.once("_promiseFollowersoff",u=>{u?d(u):t([e])})})}function Me(e){return e=v.channel(e),this._sendCommand(null,null,`PART ${e}`,(t,d)=>{this.once("_promisePart",u=>{u?d(u):t([e])})})}function Oe(e){return e=v.channel(e),this._sendCommand(null,e,"/r9kbeta",(t,d)=>{this.once("_promiseR9kbeta",u=>{u?d(u):t([e])})})}function Re(e){return e=v.channel(e),this._sendCommand(null,e,"/r9kbetaoff",(t,d)=>{this.once("_promiseR9kbetaoff",u=>{u?d(u):t([e])})})}function Ae(e,t){return e=v.channel(e),t=v.get(t,300),this._sendCommand(null,e,`/slow ${t}`,(d,u)=>{this.once("_promiseSlow",s=>{s?u(s):d([e,~~t])})})}function Pe(e){return e=v.channel(e),this._sendCommand(null,e,"/slowoff",(t,d)=>{this.once("_promiseSlowoff",u=>{u?d(u):t([e])})})}var vt={action(e,t){return e=v.channel(e),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),e,t,(d,u)=>{d([e,t])})},ban(e,t,d){return e=v.channel(e),t=v.username(t),d=v.get(d,""),this._sendCommand(null,e,`/ban ${t} ${d}`,(u,s)=>{this.once("_promiseBan",n=>{n?s(n):u([e,t,d])})})},clear(e){return e=v.channel(e),this._sendCommand(null,e,"/clear",(t,d)=>{this.once("_promiseClear",u=>{u?d(u):t([e])})})},color(e,t){return t=v.get(t,e),this._sendCommand(null,"#tmijs",`/color ${t}`,(d,u)=>{this.once("_promiseColor",s=>{s?u(s):d([t])})})},commercial(e,t){return e=v.channel(e),t=v.get(t,30),this._sendCommand(null,e,`/commercial ${t}`,(d,u)=>{this.once("_promiseCommercial",s=>{s?u(s):d([e,~~t])})})},deletemessage(e,t){return e=v.channel(e),this._sendCommand(null,e,`/delete ${t}`,(d,u)=>{this.once("_promiseDeletemessage",s=>{s?u(s):d([e])})})},emoteonly(e){return e=v.channel(e),this._sendCommand(null,e,"/emoteonly",(t,d)=>{this.once("_promiseEmoteonly",u=>{u?d(u):t([e])})})},emoteonlyoff(e){return e=v.channel(e),this._sendCommand(null,e,"/emoteonlyoff",(t,d)=>{this.once("_promiseEmoteonlyoff",u=>{u?d(u):t([e])})})},followersonly:Ie,followersmode:Ie,followersonlyoff:Se,followersmodeoff:Se,host(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(2e3,e,`/host ${t}`,(d,u)=>{this.once("_promiseHost",(s,n)=>{s?u(s):d([e,t,~~n])})})},join(e){return e=v.channel(e),this._sendCommand(void 0,null,`JOIN ${e}`,(t,d)=>{const u="_promiseJoin";let s=!1;const n=(h,g)=>{e===v.channel(g)&&(this.removeListener(u,n),s=!0,h?d(h):t([e]))};this.on(u,n);const f=this._getPromiseDelay();v.promiseDelay(f).then(()=>{s||this.emit(u,"No response from Twitch.",e)})})},mod(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(null,e,`/mod ${t}`,(d,u)=>{this.once("_promiseMod",s=>{s?u(s):d([e,t])})})},mods(e){return e=v.channel(e),this._sendCommand(null,e,"/mods",(t,d)=>{this.once("_promiseMods",(u,s)=>{u?d(u):(s.forEach(n=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(n)||this.moderators[e].push(n)}),t(s))})})},part:Me,leave:Me,ping(){return this._sendCommand(null,null,"PING",(e,t)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},v.get(this.opts.connection.timeout,9999)),this.once("_promisePing",d=>e([parseFloat(d)]))})},r9kbeta:Oe,r9kmode:Oe,r9kbetaoff:Re,r9kmodeoff:Re,raw(e){return this._sendCommand(null,null,e,(t,d)=>{t([e])})},say(e,t){return e=v.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?t.substr(1,3)==="me "?this.action(e,t.substr(4)):this._sendCommand(null,e,t,(d,u)=>{d([e,t])}):this._sendMessage(this._getPromiseDelay(),e,t,(d,u)=>{d([e,t])})},slow:Ae,slowmode:Ae,slowoff:Pe,slowmodeoff:Pe,subscribers(e){return e=v.channel(e),this._sendCommand(null,e,"/subscribers",(t,d)=>{this.once("_promiseSubscribers",u=>{u?d(u):t([e])})})},subscribersoff(e){return e=v.channel(e),this._sendCommand(null,e,"/subscribersoff",(t,d)=>{this.once("_promiseSubscribersoff",u=>{u?d(u):t([e])})})},timeout(e,t,d,u){return e=v.channel(e),t=v.username(t),d!==null&&!v.isInteger(d)&&(u=d,d=300),d=v.get(d,300),u=v.get(u,""),this._sendCommand(null,e,`/timeout ${t} ${d} ${u}`,(s,n)=>{this.once("_promiseTimeout",f=>{f?n(f):s([e,t,~~d,u])})})},unban(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(null,e,`/unban ${t}`,(d,u)=>{this.once("_promiseUnban",s=>{s?u(s):d([e,t])})})},unhost(e){return e=v.channel(e),this._sendCommand(2e3,e,"/unhost",(t,d)=>{this.once("_promiseUnhost",u=>{u?d(u):t([e])})})},unmod(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(null,e,`/unmod ${t}`,(d,u)=>{this.once("_promiseUnmod",s=>{s?u(s):d([e,t])})})},unvip(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(null,e,`/unvip ${t}`,(d,u)=>{this.once("_promiseUnvip",s=>{s?u(s):d([e,t])})})},vip(e,t){return e=v.channel(e),t=v.username(t),this._sendCommand(null,e,`/vip ${t}`,(d,u)=>{this.once("_promiseVip",s=>{s?u(s):d([e,t])})})},vips(e){return e=v.channel(e),this._sendCommand(null,e,"/vips",(t,d)=>{this.once("_promiseVips",(u,s)=>{u?d(u):t(s)})})},whisper(e,t){return e=v.username(e),e===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${e} ${t}`,(d,u)=>{this.once("_promiseWhisper",s=>{s&&u(s)})}).catch(d=>{if(d&&typeof d=="string"&&d.indexOf("No response from Twitch.")!==0)throw d;const u=v.channel(e),s=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[u,s,t,!0],[u,s,t,!0]]),[e,t]})}};function I(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var wt=I;I.EventEmitter=I;I.prototype._events=void 0;I.prototype._maxListeners=void 0;I.defaultMaxListeners=10;I.prototype.setMaxListeners=function(e){if(!yt(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};I.prototype.emit=function(e){var t,d,u,s,n,f;if(this._events||(this._events={}),e==="error"&&(!this._events.error||X(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(d=this._events[e],Ve(d))return!1;if(j(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),d.apply(this,s)}else if(X(d))for(s=Array.prototype.slice.call(arguments,1),f=d.slice(),u=f.length,n=0;n<u;n++)f[n].apply(this,s);return!0};I.prototype.addListener=function(e,t){var d;if(!j(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,j(t.listener)?t.listener:t),this._events[e]?X(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,X(this._events[e])&&!this._events[e].warned&&(Ve(this._maxListeners)?d=I.defaultMaxListeners:d=this._maxListeners,d&&d>0&&this._events[e].length>d&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};I.prototype.on=I.prototype.addListener;I.prototype.once=function(e,t){if(!j(t))throw TypeError("listener must be a function");var d=!1;if(this._events.hasOwnProperty(e)&&e.charAt(0)==="_"){var u=1,s=e;for(var n in this._events)this._events.hasOwnProperty(n)&&n.startsWith(s)&&u++;e=e+u}function f(){e.charAt(0)==="_"&&!isNaN(e.substr(e.length-1))&&(e=e.substring(0,e.length-1)),this.removeListener(e,f),d||(d=!0,t.apply(this,arguments))}return f.listener=t,this.on(e,f),this};I.prototype.removeListener=function(e,t){var d,u,s,n;if(!j(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(d=this._events[e],s=d.length,u=-1,d===t||j(d.listener)&&d.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&e.charAt(0)==="_"){var f=e;for(var h in this._events)this._events.hasOwnProperty(h)&&h.startsWith(f)&&(isNaN(parseInt(h.substr(h.length-1)))||(this._events[e+parseInt(h.substr(h.length-1)-1)]=this._events[h],delete this._events[h]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(X(d)){for(n=s;n-- >0;)if(d[n]===t||d[n].listener&&d[n].listener===t){u=n;break}if(u<0)return this;d.length===1?(d.length=0,delete this._events[e]):d.splice(u,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};I.prototype.removeAllListeners=function(e){var t,d;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[e],j(d))this.removeListener(e,d);else if(d)for(;d.length;)this.removeListener(e,d[d.length-1]);return delete this._events[e],this};I.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:j(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};I.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(j(t))return 1;if(t)return t.length}return 0};I.listenerCount=function(e,t){return e.listenerCount(t)};function j(e){return typeof e=="function"}function yt(e){return typeof e=="number"}function X(e){return typeof e=="object"&&e!==null}function Ve(e){return e===void 0}const Ct=q.exports;let Xe="info";const je={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function G(e){return function(t){je[e]>=je[Xe]&&console.log(`[${Ct.formatDate(new Date)}] ${e}: ${t}`)}}var kt={setLevel(e){Xe=e},trace:G("trace"),debug:G("debug"),info:G("info"),warn:G("warn"),error:G("error"),fatal:G("fatal")};const le=q.exports,z=/\S+/g;function he(e,t,d=",",u="/",s){const n=e[t];if(n===void 0)return e;const f=typeof n=="string";if(e[t+"-raw"]=f?n:null,n===!0)return e[t]=null,e;if(e[t]={},f){const h=n.split(d);for(let g=0;g<h.length;g++){const $=h[g].split(u);let a=$[1];s!==void 0&&a&&(a=a.split(s)),e[t][$[0]]=a||null}}return e}var Et={badges:e=>he(e,"badges"),badgeInfo:e=>he(e,"badge-info"),emotes:e=>he(e,"emotes","/",":",","),emoteRegex(e,t,d,u){z.lastIndex=0;const s=new RegExp("(\\b|^|\\s)"+le.unescapeHtml(t)+"(\\b|$|\\s)");let n;for(;(n=z.exec(e))!==null;)s.test(n[0])&&(u[d]=u[d]||[],u[d].push([n.index,z.lastIndex-1]))},emoteString(e,t,d,u){z.lastIndex=0;let s;for(;(s=z.exec(e))!==null;)s[0]===le.unescapeHtml(t)&&(u[d]=u[d]||[],u[d].push([s.index,z.lastIndex-1]))},transformEmotes(e){let t="";return Object.keys(e).forEach(d=>{t=`${t+d}:`,e[d].forEach(u=>t=`${t+u.join("-")},`),t=`${t.slice(0,-1)}/`}),t.slice(0,-1)},formTags(e){const t=[];for(const d in e){const u=le.escapeIRC(e[d]);t.push(`${d}=${u}`)}return`@${t.join(";")}`},msg(e){const t={raw:e,tags:{},prefix:null,command:null,params:[]};let d=0,u=0;if(e.charCodeAt(0)===64){if(u=e.indexOf(" "),u===-1)return null;const s=e.slice(1,u).split(";");for(let n=0;n<s.length;n++){const f=s[n],h=f.split("=");t.tags[h[0]]=f.substring(f.indexOf("=")+1)||!0}d=u+1}for(;e.charCodeAt(d)===32;)d++;if(e.charCodeAt(d)===58){if(u=e.indexOf(" ",d),u===-1)return null;for(t.prefix=e.slice(d+1,u),d=u+1;e.charCodeAt(d)===32;)d++}if(u=e.indexOf(" ",d),u===-1)return e.length>d?(t.command=e.slice(d),t):null;for(t.command=e.slice(d,u),d=u+1;e.charCodeAt(d)===32;)d++;for(;d<e.length;){if(u=e.indexOf(" ",d),e.charCodeAt(d)===58){t.params.push(e.slice(d+1));break}if(u!==-1){for(t.params.push(e.slice(d,u)),d=u+1;e.charCodeAt(d)===32;)d++;continue}if(u===-1){t.params.push(e.slice(d));break}}return t}};class $t{constructor(t){this.queue=[],this.index=0,this.defaultDelay=t===void 0?3e3:t}add(t,d){this.queue.push({fn:t,delay:d})}next(){const t=this.index++,d=this.queue[t];if(!d)return;const u=this.queue[this.index];if(d.fn(),u){const s=u.delay===void 0?this.defaultDelay:u.delay;setTimeout(()=>this.next(),s)}}}var xt=$t;(function(e){const t=typeof xe<"u"?xe:typeof window<"u"?window:{},d=t.WebSocket||be,u=t.fetch||be,s=_t,n=vt,f=wt.EventEmitter,h=kt,g=Et,$=xt,a=q.exports;let D=!1;const E=function y(o){if(!(this instanceof y))return new y(o);this.opts=a.get(o,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=a.get(this.opts.options.clientId,null),this._globalDefaultChannel=a.channel(a.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=a.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=a.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=a.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=a.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=a.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=a.get(this.opts.connection.reconnect,!0),this.reconnectDecay=a.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=a.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=a.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let i="error";this.opts.options.debug&&(i="info"),this.log=this.opts.logger||h;try{h.setLevel(i)}catch{}this.opts.channels.forEach((r,C,_)=>_[C]=a.channel(r)),f.call(this),this.setMaxListeners(0)};a.inherits(E,f);for(const y in n)E.prototype[y]=n[y];E.prototype.emits=function(o,i){for(let r=0;r<o.length;r++){const C=r<i.length?i[r]:i[i.length-1];this.emit.apply(this,[o[r]].concat(C))}},E.prototype.api=function(...y){D||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),D=!0),s(...y)},E.prototype.handleMessage=function(o){if(!o)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(o)),o);const i=a.channel(a.get(o.params[0],null));let r=a.get(o.params[1],null);const C=a.get(o.tags["msg-id"],null),_=o.tags=g.badges(g.badgeInfo(g.emotes(o.tags)));for(const c in _){if(c==="emote-sets"||c==="ban-duration"||c==="bits")continue;let m=_[c];typeof m=="boolean"?m=null:m==="1"?m=!0:m==="0"?m=!1:typeof m=="string"&&(m=a.unescapeIRC(m)),_[c]=m}if(o.prefix===null)switch(o.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const c=new Date;this.currentLatency=(c.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:
${JSON.stringify(o,null,4)}`);break}else if(o.prefix==="tmi.twitch.tv")switch(o.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=o.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))},a.get(this.opts.connection.timeout,9999))},6e4);let c=a.get(this.opts.options.joinInterval,2e3);c<300&&(c=300);const m=new $(c),x=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let N=0;N<x.length;N++){const b=x[N];m.add(()=>{this._isConnected()&&this.join(b).catch(l=>this.log.error(l))})}m.next();break}case"NOTICE":{const c=[null],m=[i,C,r],x=[C],N=[i,!0],b=[i,!1],l=[m,c],w=[m,x],p=`[${i}] ${r}`;switch(C){case"subs_on":this.log.info(`[${i}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[N,N,c]);break;case"subs_off":this.log.info(`[${i}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[b,b,c]);break;case"emote_only_on":this.log.info(`[${i}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[N,c]);break;case"emote_only_off":this.log.info(`[${i}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[b,c]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${i}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[N,N,c]);break;case"r9k_off":this.log.info(`[${i}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[b,b,c]);break;case"room_mods":{const k=r.split(": "),T=(k.length>1?k[1]:"").toLowerCase().split(", ").filter(M=>M);this.emits(["_promiseMods","mods"],[[null,T],[i,T]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[i,[]]]);break;case"vips_success":{r.endsWith(".")&&(r=r.slice(0,-1));const k=r.split(": "),T=(k.length>1?k[1]:"").toLowerCase().split(", ").filter(M=>M);this.emits(["_promiseVips","vips"],[[null,T],[i,T]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[i,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(p),this.emits(["notice","_promiseBan"],w);break;case"ban_success":this.log.info(p),this.emits(["notice","_promiseBan"],l);break;case"usage_clear":this.log.info(p),this.emits(["notice","_promiseClear"],w);break;case"usage_mods":this.log.info(p),this.emits(["notice","_promiseMods"],[m,[C,[]]]);break;case"mod_success":this.log.info(p),this.emits(["notice","_promiseMod"],l);break;case"usage_vips":this.log.info(p),this.emits(["notice","_promiseVips"],[m,[C,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(p),this.emits(["notice","_promiseVip"],[m,[C,[]]]);break;case"vip_success":this.log.info(p),this.emits(["notice","_promiseVip"],l);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(p),this.emits(["notice","_promiseMod"],w);break;case"unmod_success":this.log.info(p),this.emits(["notice","_promiseUnmod"],l);break;case"unvip_success":this.log.info(p),this.emits(["notice","_promiseUnvip"],l);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(p),this.emits(["notice","_promiseUnmod"],w);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(p),this.emits(["notice","_promiseUnvip"],w);break;case"color_changed":this.log.info(p),this.emits(["notice","_promiseColor"],l);break;case"usage_color":case"turbo_only_color":this.log.info(p),this.emits(["notice","_promiseColor"],w);break;case"commercial_success":this.log.info(p),this.emits(["notice","_promiseCommercial"],l);break;case"usage_commercial":case"bad_commercial_error":this.log.info(p),this.emits(["notice","_promiseCommercial"],w);break;case"hosts_remaining":{this.log.info(p);const k=isNaN(r[0])?0:parseInt(r[0]);this.emits(["notice","_promiseHost"],[m,[null,~~k]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(p),this.emits(["notice","_promiseHost"],[m,[C,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(p),this.emits(["notice","_promiseR9kbeta"],w);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(p),this.emits(["notice","_promiseR9kbetaoff"],w);break;case"timeout_success":this.log.info(p),this.emits(["notice","_promiseTimeout"],l);break;case"delete_message_success":this.log.info(`[${i} ${r}]`),this.emits(["notice","_promiseDeletemessage"],l);break;case"already_subs_off":case"usage_subs_off":this.log.info(p),this.emits(["notice","_promiseSubscribersoff"],w);break;case"already_subs_on":case"usage_subs_on":this.log.info(p),this.emits(["notice","_promiseSubscribers"],w);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(p),this.emits(["notice","_promiseEmoteonlyoff"],w);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(p),this.emits(["notice","_promiseEmoteonly"],w);break;case"usage_slow_on":this.log.info(p),this.emits(["notice","_promiseSlow"],w);break;case"usage_slow_off":this.log.info(p),this.emits(["notice","_promiseSlowoff"],w);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(p),this.emits(["notice","_promiseTimeout"],w);break;case"untimeout_success":case"unban_success":this.log.info(p),this.emits(["notice","_promiseUnban"],l);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(p),this.emits(["notice","_promiseUnban"],w);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(p),this.emits(["notice","_promiseDeletemessage"],w);break;case"usage_unhost":case"not_hosting":this.log.info(p),this.emits(["notice","_promiseUnhost"],w);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(p),this.emits(["notice","_promiseWhisper"],w);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(p),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[m,[C,i]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(p),this.emit("automod",i,C,r);break;case"unrecognized_cmd":this.log.info(p),this.emit("notice",i,C,r);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(p),this.emit("notice",i,C,r);break;case"host_on":case"host_off":break;default:r.includes("Login unsuccessful")||r.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=r,this.log.error(this.reason),this.ws.close()):r.includes("Error logging in")||r.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=r,this.log.error(this.reason),this.ws.close()):r.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:
${JSON.stringify(o,null,4)}`),this.emit("notice",i,C,r));break}break}case"USERNOTICE":{const c=_["display-name"]||_.login,m=_["msg-param-sub-plan"]||"",x=a.unescapeIRC(a.get(_["msg-param-sub-plan-name"],""))||null,b={prime:m.includes("Prime"),plan:m,planName:x},l=~~(_["msg-param-streak-months"]||0),w=_["msg-param-recipient-display-name"]||_["msg-param-recipient-user-name"],p=~~_["msg-param-mass-gift-count"];switch(_["message-type"]=C,C){case"resub":this.emits(["resub","subanniversary"],[[i,c,l,r,_,b]]);break;case"sub":this.emits(["subscription","sub"],[[i,c,b,r,_]]);break;case"subgift":this.emit("subgift",i,c,l,w,b,_);break;case"anonsubgift":this.emit("anonsubgift",i,l,w,b,_);break;case"submysterygift":this.emit("submysterygift",i,c,p,b,_);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",i,p,b,_);break;case"primepaidupgrade":this.emit("primepaidupgrade",i,c,b,_);break;case"giftpaidupgrade":{const k=_["msg-param-sender-name"]||_["msg-param-sender-login"];this.emit("giftpaidupgrade",i,c,k,_);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",i,c,_);break;case"raid":{const k=_["msg-param-displayName"]||_["msg-param-login"],T=+_["msg-param-viewerCount"];this.emit("raided",i,k,T,_);break}case"ritual":{const k=_["msg-param-ritual-name"];switch(k){case"new_chatter":this.emit("newchatter",i,c,_,r);break;default:this.emit("ritual",k,i,c,_,r);break}break}default:this.emit("usernotice",C,i,_,r);break}break}case"HOSTTARGET":{const c=r.split(" "),m=~~c[1]||0;c[0]==="-"?(this.log.info(`[${i}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[i,m],[null]])):(this.log.info(`[${i}] Now hosting ${c[0]} for ${m} viewer(s).`),this.emit("hosting",i,c[0],m));break}case"CLEARCHAT":if(o.params.length>1){const c=a.get(o.tags["ban-duration"],null);c===null?(this.log.info(`[${i}] ${r} has been banned.`),this.emit("ban",i,r,null,o.tags)):(this.log.info(`[${i}] ${r} has been timed out for ${c} seconds.`),this.emit("timeout",i,r,null,~~c,o.tags))}else this.log.info(`[${i}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[i],[null]]);break;case"CLEARMSG":if(o.params.length>1){const c=r,m=_.login;_["message-type"]="messagedeleted",this.log.info(`[${i}] ${m}'s message has been deleted.`),this.emit("messagedeleted",i,m,c,_)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch(c=>this.log.error(c)),setTimeout(()=>this.connect().catch(c=>this.log.error(c)),this.reconnectTimer);break;case"USERSTATE":o.tags.username=this.username,o.tags["user-type"]==="mod"&&(this.moderators[i]||(this.moderators[i]=[]),this.moderators[i].includes(this.username)||this.moderators[i].push(this.username)),!a.isJustinfan(this.getUsername())&&!this.userstate[i]&&(this.userstate[i]=_,this.lastJoined=i,this.channels.push(i),this.log.info(`Joined ${i}`),this.emit("join",i,a.username(this.getUsername()),!0)),o.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(o.tags["emote-sets"]),this.userstate[i]=_;break;case"GLOBALUSERSTATE":this.globaluserstate=_,this.emit("globaluserstate",_),typeof o.tags["emote-sets"]<"u"&&this._updateEmoteset(o.tags["emote-sets"]);break;case"ROOMSTATE":if(a.channel(this.lastJoined)===i&&this.emit("_promiseJoin",null,i),o.tags.channel=i,this.emit("roomstate",i,o.tags),!a.hasOwn(o.tags,"subs-only")){if(a.hasOwn(o.tags,"slow"))if(typeof o.tags.slow=="boolean"&&!o.tags.slow){const c=[i,!1,0];this.log.info(`[${i}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[c,c,[null]])}else{const c=~~o.tags.slow,m=[i,!0,c];this.log.info(`[${i}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[m,m,[null]])}if(a.hasOwn(o.tags,"followers-only"))if(o.tags["followers-only"]==="-1"){const c=[i,!1,0];this.log.info(`[${i}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[c,c,[null]])}else{const c=~~o.tags["followers-only"],m=[i,!0,c];this.log.info(`[${i}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[m,m,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:
${JSON.stringify(o,null,4)}`);break}else if(o.prefix==="jtv")switch(o.command){case"MODE":r==="+o"?(this.moderators[i]||(this.moderators[i]=[]),this.moderators[i].includes(o.params[2])||this.moderators[i].push(o.params[2]),this.emit("mod",i,o.params[2])):r==="-o"&&(this.moderators[i]||(this.moderators[i]=[]),this.moderators[i].filter(c=>c!==o.params[2]),this.emit("unmod",i,o.params[2]));break;default:this.log.warn(`Could not parse message from jtv:
${JSON.stringify(o,null,4)}`);break}else switch(o.command){case"353":this.emit("names",o.params[2],o.params[3].split(" "));break;case"366":break;case"JOIN":{const c=o.prefix.split("!")[0];a.isJustinfan(this.getUsername())&&this.username===c&&(this.lastJoined=i,this.channels.push(i),this.log.info(`Joined ${i}`),this.emit("join",i,c,!0)),this.username!==c&&this.emit("join",i,c,!1);break}case"PART":{let c=!1;const m=o.prefix.split("!")[0];if(this.username===m){c=!0,this.userstate[i]&&delete this.userstate[i];let x=this.channels.indexOf(i);x!==-1&&this.channels.splice(x,1),x=this.opts.channels.indexOf(i),x!==-1&&this.opts.channels.splice(x,1),this.log.info(`Left ${i}`),this.emit("_promisePart",null)}this.emit("part",i,m,c);break}case"WHISPER":{const c=o.prefix.split("!")[0];this.log.info(`[WHISPER] <${c}>: ${r}`),a.hasOwn(o.tags,"username")||(o.tags.username=c),o.tags["message-type"]="whisper";const m=a.channel(o.tags.username);this.emits(["whisper","message"],[[m,o.tags,r,!1]]);break}case"PRIVMSG":if(o.tags.username=o.prefix.split("!")[0],o.tags.username==="jtv"){const c=a.username(r.split(" ")[0]),m=r.includes("auto");if(r.includes("hosting you for")){const x=a.extractNumber(r);this.emit("hosted",i,c,x,m)}else r.includes("hosting you")&&this.emit("hosted",i,c,0,m)}else{const c=a.get(this.opts.options.messagesLogLevel,"info"),m=a.actionMessage(r);if(o.tags["message-type"]=m?"action":"chat",r=m?m[1]:r,a.hasOwn(o.tags,"bits"))this.emit("cheer",i,o.tags,r);else{if(a.hasOwn(o.tags,"msg-id")){if(o.tags["msg-id"]==="highlighted-message"){const x=o.tags["msg-id"];this.emit("redeem",i,o.tags.username,x,o.tags,r)}else if(o.tags["msg-id"]==="skip-subs-mode-message"){const x=o.tags["msg-id"];this.emit("redeem",i,o.tags.username,x,o.tags,r)}}else if(a.hasOwn(o.tags,"custom-reward-id")){const x=o.tags["custom-reward-id"];this.emit("redeem",i,o.tags.username,x,o.tags,r)}m?(this.log[c](`[${i}] *<${o.tags.username}>: ${r}`),this.emits(["action","message"],[[i,o.tags,r,!1]])):(this.log[c](`[${i}] <${o.tags.username}>: ${r}`),this.emits(["chat","message"],[[i,o.tags,r,!1]]))}}break;default:this.log.warn(`Could not parse message:
${JSON.stringify(o,null,4)}`);break}},E.prototype.connect=function(){return new Promise((o,i)=>{this.server=a.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=a.get(this.opts.connection.port,80),this.secure&&(this.port=443),this.port===443&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",r=>{r?i(r):o([this.server,~~this.port])})})},E.prototype._openConnection=function(){const o=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,i={};"agent"in this.opts.connection&&(i.agent=this.opts.connection.agent),this.ws=new d(o,"irc",i),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},E.prototype._onOpen=function(){!this._isConnected()||(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=a.get(this.opts.identity.username,a.justinfan()),this._getToken().then(o=>{const i=a.password(o);this.log.info("Sending authentication to server.."),this.emit("logon");let r="twitch.tv/tags twitch.tv/commands";this._skipMembership||(r+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+r),i?this.ws.send(`PASS ${i}`):a.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)}).catch(o=>{this.emits(["_promiseConnect","disconnected"],[[o],["Could not get a token."]])}))},E.prototype._getToken=function(){const o=this.opts.identity.password;let i;return typeof o=="function"?(i=o(),i instanceof Promise?i:Promise.resolve(i)):Promise.resolve(o)},E.prototype._onMessage=function(o){o.data.trim().split(`\r
`).forEach(r=>{const C=g.msg(r);C&&this.handleMessage(C)})},E.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=this.ws===null?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(o=>this.log.error(o))},this.reconnectTimer)),this.ws=null},E.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(o=>this.log.error(o))},this.reconnectTimer))),this.ws=null},E.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},E.prototype._sendCommand=function(o,i,r,C){return new Promise((_,c)=>{if(this._isConnected())(o===null||typeof o=="number")&&(o===null&&(o=this._getPromiseDelay()),a.promiseDelay(o).then(()=>c("No response from Twitch.")));else return c("Not connected to server.");if(i!==null){const m=a.channel(i);this.log.info(`[${m}] Executing command: ${r}`),this.ws.send(`PRIVMSG ${m} :${r}`)}else this.log.info(`Executing command: ${r}`),this.ws.send(r);typeof C=="function"?C(_,c):_()})},E.prototype._sendMessage=function(o,i,r,C){return new Promise((_,c)=>{if(this._isConnected()){if(a.isJustinfan(this.getUsername()))return c("Cannot send anonymous messages.")}else return c("Not connected to server.");const m=a.channel(i);if(this.userstate[m]||(this.userstate[m]={}),r.length>=500){const w=a.splitLine(r,500);r=w[0],setTimeout(()=>{this._sendMessage(o,i,w[1],()=>{})},350)}this.ws.send(`PRIVMSG ${m} :${r}`);const x={};Object.keys(this.emotesets).forEach(w=>this.emotesets[w].forEach(p=>(a.isRegex(p.code)?g.emoteRegex:g.emoteString)(r,p.code,p.id,x)));const N=Object.assign(this.userstate[m],g.emotes({emotes:g.transformEmotes(x)||null})),b=a.get(this.opts.options.messagesLogLevel,"info"),l=a.actionMessage(r);l?(N["message-type"]="action",this.log[b](`[${m}] *<${this.getUsername()}>: ${l[1]}`),this.emits(["action","message"],[[m,N,l[1],!0]])):(N["message-type"]="chat",this.log[b](`[${m}] <${this.getUsername()}>: ${r}`),this.emits(["chat","message"],[[m,N,r,!0]])),typeof C=="function"?C(_,c):_()})},E.prototype._updateEmoteset=function(o){let i=o!==void 0;if(i&&(o===this.emotes?i=!1:this.emotes=o),this._skipUpdatingEmotesets){i&&this.emit("emotesets",o,{});return}const r=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout(()=>this._updateEmoteset(o),this._updateEmotesetsTimerDelay))};this._getToken().then(C=>{const _=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${o}`,c={};return"fetchAgent"in this.opts.connection&&(c.agent=this.opts.connection.fetchAgent),u(_,{...c,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${a.token(C)}`,"Client-ID":this.clientId}})}).then(C=>C.json()).then(C=>{this.emotesets=C.emoticon_sets||{},this.emit("emotesets",o,this.emotesets),r()}).catch(()=>r())},E.prototype.getUsername=function(){return this.username},E.prototype.getOptions=function(){return this.opts},E.prototype.getChannels=function(){return this.channels},E.prototype.isMod=function(o,i){const r=a.channel(o);return this.moderators[r]||(this.moderators[r]=[]),this.moderators[r].includes(a.username(i))},E.prototype.readyState=function(){return this.ws===null?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},E.prototype._isConnected=function(){return this.ws!==null&&this.ws.readyState===1},E.prototype.disconnect=function(){return new Promise((o,i)=>{this.ws!==null&&this.ws.readyState!==3?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>o([this.server,~~this.port]))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),i("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},E.prototype.off=E.prototype.removeListener,e.exports&&(e.exports=E),typeof window<"u"&&(window.tmi={client:E,Client:E})})(We);const Ue=We.exports;var Tt={client:Ue,Client:Ue};/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var Nt=function(){var e={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:_,toCodePoint:N},onerror:function(){this.parentNode&&this.parentNode.replaceChild(g(this.alt,!1),this)},parse:c,replace:m,test:x},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},d=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,u=/\uFE0F/g,s=String.fromCharCode(8205),n=/[&<>'"]/g,f=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,h=String.fromCharCode;return e;function g(b,l){return document.createTextNode(l?b.replace(u,""):b)}function $(b){return b.replace(n,i)}function a(b,l){return"".concat(l.base,l.size,"/",b,l.ext)}function D(b,l){for(var w=b.childNodes,p=w.length,k,T;p--;)k=w[p],T=k.nodeType,T===3?l.push(k):T===1&&!("ownerSVGElement"in k)&&!f.test(k.nodeName.toLowerCase())&&D(k,l);return l}function E(b){return N(b.indexOf(s)<0?b.replace(u,""):b)}function y(b,l){for(var w=D(b,[]),p=w.length,k,T,M,S,Q,J,ne,F,Z,A,H,K,ie;p--;){for(M=!1,S=document.createDocumentFragment(),Q=w[p],J=Q.nodeValue,F=0;ne=d.exec(J);){if(Z=ne.index,Z!==F&&S.appendChild(g(J.slice(F,Z),!0)),H=ne[0],K=E(H),F=Z+H.length,ie=l.callback(K,l),K&&ie){A=new Image,A.onerror=l.onerror,A.setAttribute("draggable","false"),k=l.attributes(H,K);for(T in k)k.hasOwnProperty(T)&&T.indexOf("on")!==0&&!A.hasAttribute(T)&&A.setAttribute(T,k[T]);A.className=l.className,A.alt=H,A.src=ie,M=!0,S.appendChild(A)}A||S.appendChild(g(H,!1)),A=null}M&&(F<J.length&&S.appendChild(g(J.slice(F),!0)),Q.parentNode.replaceChild(S,Q))}return b}function o(b,l){return m(b,function(w){var p=w,k=E(w),T=l.callback(k,l),M,S;if(k&&T){p="<img ".concat('class="',l.className,'" ','draggable="false" ','alt="',w,'"',' src="',T,'"'),M=l.attributes(w,k);for(S in M)M.hasOwnProperty(S)&&S.indexOf("on")!==0&&p.indexOf(" "+S+"=")===-1&&(p=p.concat(" ",S,'="',$(M[S]),'"'));p=p.concat("/>")}return p})}function i(b){return t[b]}function r(){return null}function C(b){return typeof b=="number"?b+"x"+b:b}function _(b){var l=typeof b=="string"?parseInt(b,16):b;return l<65536?h(l):(l-=65536,h(55296+(l>>10),56320+(l&1023)))}function c(b,l){return(!l||typeof l=="function")&&(l={callback:l}),(typeof b=="string"?o:y)(b,{callback:l.callback||a,attributes:typeof l.attributes=="function"?l.attributes:r,base:typeof l.base=="string"?l.base:e.base,ext:l.ext||e.ext,size:l.folder||C(l.size||e.size),className:l.className||e.className,onerror:l.onerror||e.onerror})}function m(b,l){return String(b).replace(d,l)}function x(b){d.lastIndex=0;var l=d.test(b);return d.lastIndex=0,l}function N(b,l){for(var w=[],p=0,k=0,T=0;T<b.length;)p=b.charCodeAt(T++),k?(w.push((65536+(k-55296<<10)+(p-56320)).toString(16)),k=0):55296<=p&&p<=56319?k=p:w.push(p.toString(16));return w.join(l||"-")}}();function ge(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}let te,de,B,De=!1,W,Fe=!1;async function Qe(){if(te)return te;const t=new URLSearchParams(window.location.search).get("channel");return te=await(await fetch(`https://decapi.me/twitch/id/${t}`)).text(),te}async function Lt(){if(de)return de;const e=await fetch("https://api.betterttv.net/3/cached/emotes/global");return e.ok?(de=(await e.json()).reduce((d,u)=>{const s={id:u.id,type:u.imageType};return d[u.code]=s,d},{}),de):{}}async function It(){if(B)return B;if(!B&&De)return{};const e=await Qe(),t=await fetch(`https://api.betterttv.net/3/cached/users/twitch/${e}`);if(De=!0,t.ok){const d=await t.json();return B=(d==null?void 0:d.channelEmotes.concat(d.sharedEmotes)).reduce((s,n)=>{const f={id:n.id,type:n.imageType};return s[n.code]=f,s},{}),B}return{}}async function St(){if(W)return W;if(!W&&Fe)return{};const e=await Qe(),t=await fetch(`https://api.betterttv.net/3/cached/frankerfacez/users/twitch/${e}`);return Fe=!0,t.ok?(W=(await t.json()).reduce((u,s)=>{const n={id:s.id,type:s.imageType};return u[s.code]=n,u},{}),W):{}}const _e={getBttvGlobalLookupTable:Lt,getBttvChannelLookupTable:It,getFfzChannelLookupTable:St},{replace:Mt}="",Ot=/[&<>'"]/g,Rt={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},At=e=>Rt[e],He=e=>Mt.call(e,Ot,At);function Ge(e,t,d){return[...e].slice(t,d).join("")}function Pt(e,t){let d=[];for(const[f,h]of Object.entries(t))h.forEach(g=>{const[$,a]=g.split("-");d.push({emoteStartIndex:Number($),emoteEndIndex:Number(a)+1,emoteId:f})});d=d.sort((f,h)=>f.emoteStartIndex-h.emoteStartIndex);const u=[];let s=0;d.forEach(({emoteStartIndex:f,emoteEndIndex:h,emoteId:g})=>{const $={type:"text",content:Ge(e,s,f)},a={type:"emote",content:g};u.push($,a),s=h});const n=Ge(e,s);return n&&u.push({type:"text",content:n}),u}const jt="https://static-cdn.jtvnw.net/emoticons/v2",Ze="https://cdn.betterttv.net/emote",Ut="https://cdn.betterttv.net/frankerfacez_emote",Dt=(e,t)=>t?Pt(e,t).map(u=>u.type==="emote"?`<img src="${jt}/${u.content}/default/light/3.0" alt="emote" class="emote" />`:He(u.content)).join(""):He(e),Ft=async e=>{const t=await _e.getBttvGlobalLookupTable(),d=Object.keys(t);if(d.every(n=>!e.includes(n)))return e;let s=e;return d.forEach(n=>{const f=ge(n),h=new RegExp(`\\b${f}\\b`,"g");s=s.replaceAll(h,g=>{const $=t[g].id;return`<img src="${Ze}/${$}/2x" class="emote" />`})}),s},Ht=async e=>{const t=await _e.getBttvChannelLookupTable(),d=Object.keys(t);if(d.every(n=>!e.includes(n)))return e;let s=e;return d.forEach(n=>{const f=ge(n),h=new RegExp(`\\b${f}\\b`,"g");s=s.replaceAll(h,g=>{const $=t[g].id;return`<img src="${Ze}/${$}/2x" class="emote"/>`})}),s},Gt=async e=>{const t=await _e.getFfzChannelLookupTable(),d=Object.keys(t);if(d.every(n=>!e.includes(n)))return e;let s=e;return d.forEach(n=>{const f=ge(n),h=new RegExp(`\\b${f}\\b`,"g");s=s.replaceAll(h,g=>{const $=t[g].id;return`<img src="${Ut}/${$}/2" class="emote" />`})}),s},zt=async(e,t)=>{let d=e;return d=Dt(d,t),d=await Ft(d),d=await Ht(d),d=await Gt(d),d},qt=async(e,t)=>({messageHTML:await zt(t,e.emotes),displayName:e["display-name"],userColor:e.color,isSlashMeMessage:e["message-type"]==="action",badgeKeys:e.badges?Object.keys(e.badges):[]}),Ke="https://pronouns.alejo.io/api";let U,ue={};const Jt=async()=>U||(U=await(await fetch(`${Ke}/pronouns`)).json(),U=U.reduce((t,d)=>(t[d.name]=d.display,t),{}),U),Bt=async e=>{var s;if(U||await Jt(),ue[e])return ue[e];const d=await(await fetch(`${Ke}/users/${e}`)).json(),u=(s=d==null?void 0:d[0])==null?void 0:s.pronoun_id;return u&&(ue[e]=U[u]),ue[e]};it([ot]);const Wt=20;let se;async function Vt(e,t){const d=await qt(e,t),{messageHTML:u,displayName:s}=d;let{userColor:n}=d;n=O(n||"#b9a3e3").toHex();const f=O(n).contrast("#000"),h=O(n).contrast("#fff"),g=f>h,$=d.isSlashMeMessage;let E=`
    <span class="username" style="${`background-color: ${n}; color: ${g?"#000":"#fff"};`}">
      
      ${s}
      ${$?"":"<span class='pronouns'></span>"}    
    </span>  
  `;const y=document.createElement("p");return y.className="message",$&&y.classList.add("italic"),y.id=e.id,y.setAttribute("data-user-id",e["user-id"]),y.innerHTML=`${E} <span class="message-text">${u}</span>`,Nt.parse(y),y}async function Xt(e,t,d){var f;const u=await Vt(t,d);document.querySelector(se).append(u),Bt(t.username).then(h=>{h&&Qt(t["user-id"],h)});const n=document.querySelectorAll(`${se} p`);n.length>Wt&&((f=n[0])==null||f.remove())}function Qt(e,t){document.querySelectorAll(`[data-user-id="${e}"] .username .pronouns`).forEach(u=>u.innerHTML=`&nbsp;(${t})`)}function Zt(e,t,d,u){const s=u["target-msg-id"],n=document.getElementById(s);n==null||n.remove()}function ze(e,t,d,u,s){const n=s["target-user-id"];document.querySelectorAll(`[data-user-id="${n}"]`).forEach(h=>h.remove())}function Kt(){const e=new URLSearchParams(window.location.search),t=e.get("channel");e.has("chatStrip")?(document.querySelector(".chat-box").style.display="none",se=".chat-strip"):(document.querySelector(".chat-strip").style.display="none",se=".chat-box");const u=Tt.Client({channels:[t]});u.connect(),u.on("message",Xt),u.on("messagedeleted",Zt),u.on("timeout",ze),u.on("ban",ze)}document.addEventListener("DOMContentLoaded",Kt);
